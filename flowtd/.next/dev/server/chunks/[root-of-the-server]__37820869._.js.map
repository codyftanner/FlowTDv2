{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///home/codytanner/FlowTDv2/flowtd/lib/db.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client'\n\nconst globalForPrisma = globalThis as unknown as {\n  prisma: PrismaClient | undefined\n}\n\nexport const prisma =\n  globalForPrisma.prisma ??\n  new PrismaClient({\n    log: process.env.NODE_ENV === 'development' ? ['query', 'error', 'warn'] : ['error'],\n  })\n\nif (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,kBAAkB;AAIjB,MAAM,SACX,gBAAgB,MAAM,IACtB,IAAI,6IAAY,CAAC;IACf,KAAK,uCAAyC;QAAC;QAAS;QAAS;KAAO,GAAG;AAC7E;AAEF,wCAA2C,gBAAgB,MAAM,GAAG","debugId":null}},
    {"offset": {"line": 71, "column": 0}, "map": {"version":3,"sources":["file:///home/codytanner/FlowTDv2/flowtd/lib/auth.ts"],"sourcesContent":["import { NextAuthOptions } from 'next-auth'\nimport { PrismaAdapter } from '@auth/prisma-adapter'\nimport GoogleProvider from 'next-auth/providers/google'\nimport { prisma } from './db'\nimport type { Session } from 'next-auth'\n\nconst isDev = process.env.NODE_ENV === 'development' && process.env.DEV_MODE === 'true'\n\n// Get or create dev user for development\nexport async function getDevUser() {\n  if (!isDev) return null\n  \n  let devUser = await prisma.user.findUnique({\n    where: { email: 'dev@flowtd.local' }\n  })\n  \n  if (!devUser) {\n    devUser = await prisma.user.create({\n      data: {\n        email: 'dev@flowtd.local',\n        name: 'Dev User',\n        emailVerified: new Date(),\n      }\n    })\n  }\n  \n  return devUser\n}\n\n// Helper to get session with dev mode support\nexport async function getServerSessionWithDev(options?: NextAuthOptions): Promise<Session | null> {\n  if (isDev) {\n    const devUser = await getDevUser()\n    if (devUser) {\n      return {\n        user: {\n          id: devUser.id,\n          email: devUser.email,\n          name: devUser.name,\n          image: devUser.image,\n        },\n        expires: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString(), // 30 days\n      } as Session\n    }\n  }\n  \n  // Fall back to normal NextAuth session\n  const { getServerSession } = await import('next-auth/next')\n  return getServerSession(options || authOptions)\n}\n\nexport const authOptions: NextAuthOptions = {\n  adapter: PrismaAdapter(prisma) as any,\n  providers: [\n    GoogleProvider({\n      clientId: process.env.GOOGLE_CLIENT_ID!,\n      clientSecret: process.env.GOOGLE_CLIENT_SECRET!,\n      authorization: {\n        params: {\n          scope: 'openid email profile https://www.googleapis.com/auth/calendar.readonly https://www.googleapis.com/auth/calendar.events',\n        },\n      },\n    }),\n  ],\n  callbacks: {\n    async session({ session, user }) {\n      if (session.user) {\n        session.user.id = user.id\n      }\n      return session\n    },\n  },\n  pages: {\n    signIn: '/auth/signin',\n  },\n}\n\ndeclare module 'next-auth' {\n  interface Session {\n    user: {\n      id: string\n      name?: string | null\n      email?: string | null\n      image?: string | null\n    }\n  }\n}\n\n"],"names":[],"mappings":";;;;;;;;AACA;AACA;AACA;;;;AAGA,MAAM,QAAQ,oDAAyB,iBAAiB,QAAQ,GAAG,CAAC,QAAQ,KAAK;AAG1E,eAAe;IACpB,IAAI,CAAC,OAAO,OAAO;IAEnB,IAAI,UAAU,MAAM,qHAAM,CAAC,IAAI,CAAC,UAAU,CAAC;QACzC,OAAO;YAAE,OAAO;QAAmB;IACrC;IAEA,IAAI,CAAC,SAAS;QACZ,UAAU,MAAM,qHAAM,CAAC,IAAI,CAAC,MAAM,CAAC;YACjC,MAAM;gBACJ,OAAO;gBACP,MAAM;gBACN,eAAe,IAAI;YACrB;QACF;IACF;IAEA,OAAO;AACT;AAGO,eAAe,wBAAwB,OAAyB;IACrE,IAAI,OAAO;QACT,MAAM,UAAU,MAAM;QACtB,IAAI,SAAS;YACX,OAAO;gBACL,MAAM;oBACJ,IAAI,QAAQ,EAAE;oBACd,OAAO,QAAQ,KAAK;oBACpB,MAAM,QAAQ,IAAI;oBAClB,OAAO,QAAQ,KAAK;gBACtB;gBACA,SAAS,IAAI,KAAK,KAAK,GAAG,KAAK,KAAK,KAAK,KAAK,KAAK,MAAM,WAAW;YACtE;QACF;IACF;IAEA,uCAAuC;IACvC,MAAM,EAAE,gBAAgB,EAAE,GAAG;IAC7B,OAAO,iBAAiB,WAAW;AACrC;AAEO,MAAM,cAA+B;IAC1C,SAAS,IAAA,uKAAa,EAAC,qHAAM;IAC7B,WAAW;QACT,IAAA,gKAAc,EAAC;YACb,UAAU,QAAQ,GAAG,CAAC,gBAAgB;YACtC,cAAc,QAAQ,GAAG,CAAC,oBAAoB;YAC9C,eAAe;gBACb,QAAQ;oBACN,OAAO;gBACT;YACF;QACF;KACD;IACD,WAAW;QACT,MAAM,SAAQ,EAAE,OAAO,EAAE,IAAI,EAAE;YAC7B,IAAI,QAAQ,IAAI,EAAE;gBAChB,QAAQ,IAAI,CAAC,EAAE,GAAG,KAAK,EAAE;YAC3B;YACA,OAAO;QACT;IACF;IACA,OAAO;QACL,QAAQ;IACV;AACF","debugId":null}},
    {"offset": {"line": 152, "column": 0}, "map": {"version":3,"sources":["file:///home/codytanner/FlowTDv2/flowtd/app/api/tasks/today/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\nimport { getServerSessionWithDev } from '@/lib/auth'\nimport { prisma } from '@/lib/db'\nimport { startOfToday, endOfToday } from 'date-fns'\n\nexport async function GET(req: NextRequest) {\n  try {\n    const session = await getServerSessionWithDev()\n    if (!session?.user?.id) {\n      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 })\n    }\n\n    const searchParams = req.nextUrl.searchParams\n    const contexts = searchParams.get('contexts')?.split(',') || []\n    const energyLevel = searchParams.get('energyLevel')\n    const timeBlock = searchParams.get('timeBlock')\n\n    const todayStart = startOfToday()\n    const todayEnd = endOfToday()\n\n    const where: any = {\n      userId: session.user.id,\n      status: {\n        in: ['PENDING', 'IN_PROGRESS'],\n      },\n      OR: [\n        {\n          dueDate: {\n            gte: todayStart,\n            lte: todayEnd,\n          },\n        },\n        {\n          plannedStart: {\n            gte: todayStart,\n            lte: todayEnd,\n          },\n        },\n        // Also include tasks without dates (for suggested/quick wins)\n        {\n          dueDate: null,\n          plannedStart: null,\n        },\n      ],\n    }\n\n    // Filter by contexts (tasks must have ALL specified contexts)\n    if (contexts.length > 0) {\n      where.AND = [\n        ...(where.AND || []),\n        ...contexts.map((ctx: string) => ({\n          contexts: {\n            contains: ctx,\n          },\n        })),\n      ]\n    }\n\n    // Filter by energy level\n    if (energyLevel) {\n      where.AND = [\n        ...(where.AND || []),\n        { energyLevel },\n      ]\n    }\n\n    // Filter by time block\n    if (timeBlock) {\n      where.AND = [\n        ...(where.AND || []),\n        { timeBlock },\n      ]\n    }\n\n    const tasks = await prisma.task.findMany({\n      where,\n      include: {\n        project: {\n          select: {\n            id: true,\n            title: true,\n          },\n        },\n      },\n      orderBy: [\n        { dueDate: 'asc' },\n        { plannedStart: 'asc' },\n        { createdAt: 'asc' },\n      ],\n      take: 50,\n    })\n\n    return NextResponse.json(tasks)\n  } catch (error) {\n    console.error('Failed to load today tasks:', error)\n    return NextResponse.json({ error: 'Failed to load tasks' }, { status: 500 })\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AAAA;;;;;AAEO,eAAe,IAAI,GAAgB;IACxC,IAAI;QACF,MAAM,UAAU,MAAM,IAAA,wIAAuB;QAC7C,IAAI,CAAC,SAAS,MAAM,IAAI;YACtB,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAe,GAAG;gBAAE,QAAQ;YAAI;QACpE;QAEA,MAAM,eAAe,IAAI,OAAO,CAAC,YAAY;QAC7C,MAAM,WAAW,aAAa,GAAG,CAAC,aAAa,MAAM,QAAQ,EAAE;QAC/D,MAAM,cAAc,aAAa,GAAG,CAAC;QACrC,MAAM,YAAY,aAAa,GAAG,CAAC;QAEnC,MAAM,aAAa,IAAA,6JAAY;QAC/B,MAAM,WAAW,IAAA,yJAAU;QAE3B,MAAM,QAAa;YACjB,QAAQ,QAAQ,IAAI,CAAC,EAAE;YACvB,QAAQ;gBACN,IAAI;oBAAC;oBAAW;iBAAc;YAChC;YACA,IAAI;gBACF;oBACE,SAAS;wBACP,KAAK;wBACL,KAAK;oBACP;gBACF;gBACA;oBACE,cAAc;wBACZ,KAAK;wBACL,KAAK;oBACP;gBACF;gBACA,8DAA8D;gBAC9D;oBACE,SAAS;oBACT,cAAc;gBAChB;aACD;QACH;QAEA,8DAA8D;QAC9D,IAAI,SAAS,MAAM,GAAG,GAAG;YACvB,MAAM,GAAG,GAAG;mBACN,MAAM,GAAG,IAAI,EAAE;mBAChB,SAAS,GAAG,CAAC,CAAC,MAAgB,CAAC;wBAChC,UAAU;4BACR,UAAU;wBACZ;oBACF,CAAC;aACF;QACH;QAEA,yBAAyB;QACzB,IAAI,aAAa;YACf,MAAM,GAAG,GAAG;mBACN,MAAM,GAAG,IAAI,EAAE;gBACnB;oBAAE;gBAAY;aACf;QACH;QAEA,uBAAuB;QACvB,IAAI,WAAW;YACb,MAAM,GAAG,GAAG;mBACN,MAAM,GAAG,IAAI,EAAE;gBACnB;oBAAE;gBAAU;aACb;QACH;QAEA,MAAM,QAAQ,MAAM,qHAAM,CAAC,IAAI,CAAC,QAAQ,CAAC;YACvC;YACA,SAAS;gBACP,SAAS;oBACP,QAAQ;wBACN,IAAI;wBACJ,OAAO;oBACT;gBACF;YACF;YACA,SAAS;gBACP;oBAAE,SAAS;gBAAM;gBACjB;oBAAE,cAAc;gBAAM;gBACtB;oBAAE,WAAW;gBAAM;aACpB;YACD,MAAM;QACR;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,+BAA+B;QAC7C,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAuB,GAAG;YAAE,QAAQ;QAAI;IAC5E;AACF","debugId":null}}]
}